webpackHotUpdate("main",{

/***/ "./src/components/LinkToolbar.tsx":
/*!****************************************!*\
  !*** ./src/components/LinkToolbar.tsx ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst assert_1 = __importDefault(__webpack_require__(/*! assert */ \"./node_modules/assert/assert.js\"));\nconst React = __importStar(__webpack_require__(/*! react */ \"./node_modules/react/index.js\"));\nconst LinkEditor_1 = __importDefault(__webpack_require__(/*! ./LinkEditor */ \"./src/components/LinkEditor.tsx\"));\nconst FloatingToolbar_1 = __importDefault(__webpack_require__(/*! ./FloatingToolbar */ \"./src/components/FloatingToolbar.tsx\"));\nconst createAndInsertLink_1 = __importDefault(__webpack_require__(/*! ../commands/createAndInsertLink */ \"./src/commands/createAndInsertLink.ts\"));\nfunction isActive(props) {\n    const { view } = props;\n    const { selection } = view.state;\n    const paragraph = view.domAtPos(selection.$from.pos);\n    return props.isActive && !!paragraph.node;\n}\nclass LinkToolbar extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.menuRef = React.createRef();\n        this.state = {\n            left: -1000,\n            top: undefined,\n        };\n        this.handleClickOutside = ev => {\n            if (ev.target &&\n                this.menuRef.current &&\n                this.menuRef.current.contains(ev.target)) {\n                return;\n            }\n            this.props.onClose();\n        };\n        this.handleOnCreateLink = async (title) => {\n            const { dictionary, onCreateLink, view, onClose, onShowToast } = this.props;\n            onClose();\n            this.props.view.focus();\n            if (!onCreateLink) {\n                return;\n            }\n            const { dispatch, state } = view;\n            const { from, to } = state.selection;\n            assert_1.default(from === to);\n            const href = `creating#${title}â€¦`;\n            dispatch(view.state.tr\n                .insertText(title, from, to)\n                .addMark(from, to + title.length, state.schema.marks.link.create({ href })));\n            createAndInsertLink_1.default(view, title, href, {\n                onCreateLink,\n                onShowToast,\n                dictionary,\n            });\n        };\n        this.handleOnSelectLink = ({ href, title, }) => {\n            const { view, onClose } = this.props;\n            onClose();\n            this.props.view.focus();\n            const { dispatch, state } = view;\n            const { from, to } = state.selection;\n            assert_1.default(from === to);\n            dispatch(view.state.tr\n                .insertText(title, from, to)\n                .addMark(from, to + title.length, state.schema.marks.link.create({ href })));\n        };\n    }\n    componentDidMount() {\n        window.addEventListener(\"mousedown\", this.handleClickOutside);\n    }\n    componentWillUnmount() {\n        window.removeEventListener(\"mousedown\", this.handleClickOutside);\n    }\n    render() {\n        const _a = this.props, { onCreateLink, onClose } = _a, rest = __rest(_a, [\"onCreateLink\", \"onClose\"]);\n        const selection = this.props.view.state.selection;\n        return (React.createElement(FloatingToolbar_1.default, Object.assign({ ref: this.menuRef, active: isActive(this.props) }, rest), isActive(this.props) && (React.createElement(LinkEditor_1.default, Object.assign({ from: selection.from, to: selection.to, onCreateLink: onCreateLink ? this.handleOnCreateLink : undefined, onSelectLink: this.handleOnSelectLink, onRemoveLink: onClose }, rest)))));\n    }\n}\nexports.default = LinkToolbar;\n\n\n//# sourceURL=webpack:///./src/components/LinkToolbar.tsx?");

/***/ })

})